---
layout: post
title: PortSwigger | Lab 1 & 2
categories: PS
---

# Lab 1: SQL Injection Vulnerability in WHERE Clause Allowing Retrieval of Hidden Data

## Challenge Overview

This lab contains a SQL injection vulnerability in the product category filter. When the user selects a category, the application carries out a SQL query like the following:

```sql
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```
The goal of the lab is to perform a SQL injection attack that causes the application to display one or more unreleased products.

Exploiting the SQL Injection
Understanding the Query

The SQL query is filtering products based on the category chosen by the user, and it only displays products that are marked as released. The vulnerability exists because the category value is not properly sanitized, allowing an attacker to inject malicious SQL code.
Strategy

To exploit this, we can inject a condition that forces the query to ignore the released = 1 filter. By injecting the following payload:

```sql
' OR 1=1--
```

The SQL query becomes:

```sql
SELECT * FROM products WHERE category = 'Gifts' OR 1=1--' AND released = 1
```

## How to Perform the Attack

1. **Start Burp Suite**  
   Open Burp Suite and browse to the lab provided by PortSwigger.

2. **Activate Proxy Interception**  
   Once Burp Suite is running, navigate to the "Proxy" tab. Press the "Intercept is off" button to activate the intercept function. You will see the button change to "Intercept is on."
   ![afbeelding](https://github.com/user-attachments/assets/caaba6f6-e5fd-4e28-b2e6-0a4006c3c830)

4. **Enable Proxy in the Browser**  
   In your browser, enable the proxy either through settings or by using a plugin. We choose the latter option for simplicity.
   ![afbeelding](https://github.com/user-attachments/assets/8443a53a-c422-433d-a487-d69a41fc33c3)

6. **Ensure Interception is Active**  
   With "Intercept is on" and your browser using the proxy, you are ready to start the attack.

7. **Navigate to the 'Gifts' Category**  
   On the website, navigate to the "Gifts" category in the navigation bar. You will see that Burp Suite intercepts the request.

8. **Analyze the Request**  
   Let's take a closer look at this request.
   ![afbeelding](https://github.com/user-attachments/assets/f2bd3269-5b94-4b1e-a4d8-a7f84822ccd5)

